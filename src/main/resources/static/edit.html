<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Edit Data</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body style="background-image: linear-gradient(to right, #7f53ac 0, #657ced 100%); color: black;">
    <h1 class="fs-1 p-3 m-3 fw-bold text-center">Edit Data</h1>

    <label for="to">To:</label><br>
    <input type="text" id="to" name="to"><br>

    <label for="name">Name:</label><br>
    <input type="text" id="name" name="name"><br>

    <label for="challanNo">Challan No:</label><br>
    <input type="text" id="challanNo" name="challanNo"><br>

    <label for="itemName">Item Name:</label><br>
    <input type="text" id="itemName" name="itemName"><br>

    <label for="quantity">Quantity:</label><br>
    <input type="text" id="quantity" name="quantity"><br>

    <label for="price">Price:</label><br>
    <input type="text" id="price" name="price"><br>

    <button type="button" onclick="submitEdit()">Submit</button>
</form>
<script>
// Function to populate the form fields with data fetched from the server
function populateFormFields(documentData) {
    document.getElementById("from").value = documentData.from;
    document.getElementById("to").value = documentData.to;
    document.getElementById("name").value = documentData.name;
    document.getElementById("challanNo").value = documentData.challanNo;
    document.getElementById("itemName").value = documentData.itemName;
    document.getElementById("quantity").value = documentData.quantity;
    document.getElementById("price").value = documentData.price;
}

// Function to fetch document data and populate the form fields
function populateFormData(documentId) {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "/get/" + documentId, true);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.onreadystatechange = function () {
        if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
                var documentData = JSON.parse(xhr.responseText);
                populateFormFields(documentData);
            } else {
                alert("Failed to fetch document data");
            }
        }
    };
    xhr.send();
}

// Function to submit the edit form
function submitEdit() {
    var form = document.getElementById("editForm");
    var formData = new FormData(form);
    var data = {};
    formData.forEach(function(value, key){
        data[key] = value;
    });
    var documentId = document.getElementById("documentId").value;
    var xhr = new XMLHttpRequest();
    xhr.open("PUT", "/update/" + documentId, true);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.onreadystatechange = function () {
        if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
                window.location.href = "/dashboard";
            } else {
                alert("Failed to edit data");
            }
=======
    <div class="container d-flex justify-content-center">
        <form id="editForm" class="p-5 d-grid gap-2 mx-auto"
            style="background: rgba(255, 255, 255, 0.5);
-webkit-backdrop-filter: blur(10px); backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.25); border-radius: 20px; box-shadow: 5px 20px 50px #000;">
            <div class="mb-3 row">
                <label class="form-label fw-bold" for="documentId">Document ID:</label><br>
                <input class="form-control w-100" type="text" id="documentId" name="documentId" readonly><br>
                <!-- Display document ID here -->
            </div>
            <div class="mb-3 row">
                <label class="form-label fw-bold" for="from">From:</label><br>
                <input class="form-control w-100" type="text" id="from" name="from"><br>
            </div>
            <div class="mb-3 row">
                <label class="form-label fw-bold" for="to">To:</label><br>
                <input class="form-control w-100" type="text" id="to" name="to"><br>
            </div>
            <div class="mb-3 row">
                <label class="form-label fw-bold" for="name">Name:</label><br>
                <input class="form-control w-100" type="text" id="name" name="name"><br>
            </div>
            <div class="mb-3 row">
                <label class="form-label fw-bold" for="challanNo">Challan No:</label><br>
                <input class="form-control w-100" type="text" id="challanNo" name="challanNo"><br>
            </div>
            <div class="mb-3 row">
                <label class="form-label fw-bold" for="itemName">Item Name:</label><br>
                <input class="form-control w-100" type="text" id="itemName" name="itemName"><br>
            </div>
            <div class="mb-3 row">
                <label class="form-label fw-bold" for="quantity">Quantity:</label><br>
                <input class="form-control w-100" type="text" id="quantity" name="quantity"><br>
            </div>
            <div class="mb-3 row">
                <label class="form-label fw-bold" for="price">Price:</label><br>
                <input class="form-control w-100" type="text" id="price" name="price"><br>
            </div>
            <button class="btn btn-outline-dark btn-sm w-25 mx-auto fw-bold" type="button"
                onclick="submitEdit()">Submit</button>
        </form>
    </div>
    <script>
        // Function to populate the document ID input field
        function populateDocumentId() {
            var urlParams = new URLSearchParams(window.location.search);
            var documentId = urlParams.get('documentId');
            document.getElementById("documentId").value = documentId;
>>>>>>> dbd375873eb1edde36e10b12a38dae435090664a
        }

<<<<<<< HEAD
// Call the function to populate the form fields with data when the page loads
window.onload = function () {
    var urlParams = new URLSearchParams(window.location.search);
    var documentId = urlParams.get('documentId');
    document.getElementById("documentId").value = documentId;
    populateFormData(documentId);
};
</script>
=======
        // Function to submit the edit form
        function submitEdit() {
            var form = document.getElementById("editForm");
            var formData = new FormData(form);
            var data = {};
            formData.forEach(function (value, key) {
                data[key] = value;
            });
            var xhr = new XMLHttpRequest();
            var documentId = document.getElementById("documentId").value;
            xhr.open("PUT", "/update/" + documentId, true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        window.location.href = "/dashboard";
                    } else {
                        alert("Failed to edit data");
                    }
                }
            };
            xhr.send(JSON.stringify(data));
        }

        // Call the function to populate the document ID input field when the page loads
        window.onload = populateDocumentId;
    </script>

    <!--Bootstrap JS and Popper-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>

</html>